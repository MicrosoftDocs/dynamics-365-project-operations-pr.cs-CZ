---
title: Důležité informace o upgradu – Microsoft Dynamics 365 Project Service Automation verze 2.x nebo 1.x na verzi 3
description: Toto téma obsahuje důležité informace, které je třeba zvážit při upgradu aplikace Project Service Automation verze 2.x nebo 1.x na verzi 3.
manager: kfend
ms.service: business-applications
ms.custom:
- dyn365-projectservice
ms.date: 11/13/2018
ms.topic: article
ms.prod: ''
ms.technology: Dynamics 365 Project Service Automation 3.x
author: JohnPBurrows
ms.assetid: e4fae2ea-9013-488e-a666-f7192dd42c0b
ms.author: john.burrows
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
ms.openlocfilehash: ba710eb8c07df7dac97e8b911184c00b87b14548
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/24/2020
ms.locfileid: "3750369"
---
# <a name="upgrade-considerations---psa-version-2x-or-1x-to-version-3"></a><span data-ttu-id="eaceb-103">Důležité informace o upgradu – PSA verze 2.x nebo 1.x na verzi 3</span><span class="sxs-lookup"><span data-stu-id="eaceb-103">Upgrade considerations - PSA version 2.x or 1.x to version 3</span></span>
[!INCLUDE[cc-applies-to-psa-app-1x-2x](../includes/cc-applies-to-psa-app-1x-2x.md)]

## <a name="project-service-automation-and-field-service"></a><span data-ttu-id="eaceb-104">Project Service Automation a Field Service</span><span class="sxs-lookup"><span data-stu-id="eaceb-104">Project Service Automation and Field Service</span></span>
<span data-ttu-id="eaceb-105">Obě aplikace Dynamics 365 Project Service Automation a Dynamics 365 Field Service používají pro plánování zdrojů řešení Universal Resourcing Scheduling (URS).</span><span class="sxs-lookup"><span data-stu-id="eaceb-105">Both Dynamics 365 Project Service Automation and Dynamics 365 Field Service use the Universal Resourcing Scheduling (URS) solution for resource scheduling.</span></span> <span data-ttu-id="eaceb-106">Pokud máte ve své instanci obě aplikace Project Service Automation a Field Service, měli byste plánovat upgrade obou řešení na nejnovější verzi (verze 3.x aplikace Project Service Automation , verze 8.x aplikace Field Service).</span><span class="sxs-lookup"><span data-stu-id="eaceb-106">If you have both Project Service Automation and Field Service in your instance, you should plan on upgrading both solutions to the latest version (version 3.x for Project Service Automation, version 8.x for Field Service).</span></span> <span data-ttu-id="eaceb-107">Při upgradu aplikace Project Service Automation nebo Field Service bude nainstalována nejnovější verze URS, což znamená, že nekonzistentní chování je možné, pokud nejsou řešení Project Service Automation i Field Service ve stejné instanci upgradována na nejnovější verzi.</span><span class="sxs-lookup"><span data-stu-id="eaceb-107">Upgrading Project Service Automation or Field Service will install the latest version of URS, which means that inconsistent behavior is possible if both Project Service Automation and Field Service solutions in the same instance aren’t upgraded to the latest version.</span></span>

## <a name="resource-assignments"></a><span data-ttu-id="eaceb-108">Přiřazení zdrojů</span><span class="sxs-lookup"><span data-stu-id="eaceb-108">Resource assignments</span></span>
<span data-ttu-id="eaceb-109">Ve verzích 2 a 1 aplikace Project Service Automation byla přiřazení úkolů uložena jako podřízené úlohy (nazývané také jako řádkové úkoly) v **entitě Úkol** a nepřímo související s entitou **Přiřazení zdroje**.</span><span class="sxs-lookup"><span data-stu-id="eaceb-109">In Project Service Automation version 2 and version 1, task assignments were stored as child tasks (also called line tasks) in the **Task entity**, and indirectly related to the **Resource Assignment** entity.</span></span> <span data-ttu-id="eaceb-110">Úkol na řádku byl viditelný v automaticky otevřeném okně přiřazení ve strukturovaném rozpisu prací (WBS).</span><span class="sxs-lookup"><span data-stu-id="eaceb-110">The line task was visible in the assignment pop-up window on the Work Breakdown Structure (WBS).</span></span>

![Úkoly na řádku pro WBS v aplikaci Project Service Automation verze 2 a 1](media/upgrade-line-task-01.png)

<span data-ttu-id="eaceb-112">V aplikaci Project Service Automation verze 3 se změnilo základní schéma přiřazení rezervovatelných zdrojů k úkolům.</span><span class="sxs-lookup"><span data-stu-id="eaceb-112">In version 3 of Project Service Automation, the underlying schema of assigning bookable resources to tasks has changed.</span></span> <span data-ttu-id="eaceb-113">Úkol na řádku byl zastaralý a mezi úlohou v **entitě Úkol** a členem týmu v entitě **Přiřazení zdroje** existuje přímá relace 1:1.</span><span class="sxs-lookup"><span data-stu-id="eaceb-113">The line task has been deprecated and there is a direct 1:1 relationship between the task in the **Task entity** and the team member in the **Resource Assignment** entity.</span></span> <span data-ttu-id="eaceb-114">Úkoly, které jsou přiřazeny členovi projektového týmu, jsou nyní uloženy přímo v entitě Přiřazení zdroje.</span><span class="sxs-lookup"><span data-stu-id="eaceb-114">Tasks that are assigned to a project team member are now stored directly in the Resource Assignment entity.</span></span>  

<span data-ttu-id="eaceb-115">Tyto změny ovlivňují upgrade všech existujících projektů, které mají přiřazení zdrojů pro pojmenované rezervovatelné zdroje a obecné zdroje v projektovém týmu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-115">These changes impact the upgrade of any existing projects that have resource assignments for named bookable resources and generic resources on a project team.</span></span> <span data-ttu-id="eaceb-116">Toto téma obsahuje důležité informace, které je třeba zohlednit u projektů při upgradu na verzi 3.</span><span class="sxs-lookup"><span data-stu-id="eaceb-116">This topic provides the considerations that you will need to take into account for your projects when you upgrade to version 3.</span></span> 

### <a name="tasks-assigned-to-named-resources"></a><span data-ttu-id="eaceb-117">Úkoly přiřazené k pojmenovaným zdrojům</span><span class="sxs-lookup"><span data-stu-id="eaceb-117">Tasks assigned to named resources</span></span>
<span data-ttu-id="eaceb-118">Pomocí základní entity úkolu umožňovaly úkoly ve verzích 2 a 1 členům týmu ztvárnit jinou roli, než je jejich výchozí definovaná role.</span><span class="sxs-lookup"><span data-stu-id="eaceb-118">Using the underlying task entity, tasks in version 2 and version 1 allowed team members to portray a role other than their default defined role.</span></span> <span data-ttu-id="eaceb-119">Například Ivaně Kočvářové, které je ve výchozím nastavení přiřazena role Programový manažer, může být přiřazena Vývojář.</span><span class="sxs-lookup"><span data-stu-id="eaceb-119">For example, Gracie George, who’s by default assigned the role of Program Manager, could be assigned to a task with the role of Developer.</span></span> <span data-ttu-id="eaceb-120">Ve verzi 3 je role pojmenovaného člena týmu vždy výchozí, takže všechny úkoly, ke kterým je přiřazena Ivana Kočvářová, používají její výchozí roli Programový manažer.</span><span class="sxs-lookup"><span data-stu-id="eaceb-120">In version 3, the role of a named team member is always the default, so any task that Gracie George is assigned to uses her default role of Program Manager.</span></span>

<span data-ttu-id="eaceb-121">Pokud jste přiřadili zdroj k úkolu mimo jeho výchozí roli ve verzi 2 a 1, při upgradu bude pojmenovanému zdroji přiřazena výchozí role pro všechna přiřazení úkolů, bez ohledu na přiřazení role ve verzi 2.</span><span class="sxs-lookup"><span data-stu-id="eaceb-121">If you have assigned a resource to a task outside of their default role in version 2 and version 1, when you upgrade, the named resource will be assigned the default role for all task assignments, regardless of role assignment in version 2.</span></span> <span data-ttu-id="eaceb-122">Výsledkem budou rozdíly ve vypočtených odhadech ve verzích 2 nebo 1 a ve verzi 3, protože odhady se počítají na základě role zdroje, nikoli na základě přiřazení úkolu na řádku.</span><span class="sxs-lookup"><span data-stu-id="eaceb-122">This will result in differences in the calculated estimates from version 2 or version 1 to version 3 because estimates are calculated based on the role of the resource and not the line task assignment.</span></span> <span data-ttu-id="eaceb-123">Například ve verzi 2 byly Dagmar Stejskalové přiřazeny dva úkoly.</span><span class="sxs-lookup"><span data-stu-id="eaceb-123">For example, in version 2, two tasks have been assigned to Ashley Chinn.</span></span> <span data-ttu-id="eaceb-124">Role v úkolu 1 na řádku je Vývojář a pro úkol 2 Programový manažer.</span><span class="sxs-lookup"><span data-stu-id="eaceb-124">The role on the line task for task 1 is Developer and for task 2, Program Manager.</span></span> <span data-ttu-id="eaceb-125">Dagmar Stejskalová má výchozí roli Programový manažer.</span><span class="sxs-lookup"><span data-stu-id="eaceb-125">Ashley Chinn has the default role of Program Manager.</span></span>

![Více rolí přiřazených jednomu zdroji](media/upgrade-multiple-roles-02.png)

<span data-ttu-id="eaceb-127">Vzhledem k tomu, že role Vývojář a Programový manažer se liší, jsou odhady nákladů a prodeje následující:</span><span class="sxs-lookup"><span data-stu-id="eaceb-127">Because the roles of Developer and Program Manager differ, the cost and sales estimates are as follows:</span></span>

![Odhady nákladů pro role zdroje](media/upggrade-cost-estimates-03.png)

![Odhady prodeje pro role zdroje](media/upgrade-sales-estimates-04.png)

<span data-ttu-id="eaceb-130">Při upgradu na verzi 3 jsou úkoly na řádku nahrazeny přiřazeními zdroje v úkolu rezervovatelného člena týmu zdroje.</span><span class="sxs-lookup"><span data-stu-id="eaceb-130">When you upgrade to version 3, line tasks are replaced with resource assignments on the task of the bookable resource team member.</span></span> <span data-ttu-id="eaceb-131">Přiřazení bude používat výchozí roli rezervovatelného zdroje.</span><span class="sxs-lookup"><span data-stu-id="eaceb-131">The assignment will use the default role of the bookable resource.</span></span> <span data-ttu-id="eaceb-132">V následující grafice je zdrojem Dagmar Stejskalová, která má roli Programový manažer.</span><span class="sxs-lookup"><span data-stu-id="eaceb-132">In the following graphic, Ashley Chinn who has a role of Program Manager, is the resource.</span></span>

![Přiřazení zdrojů](media/resource-assignment-v2-05.png)

<span data-ttu-id="eaceb-134">Vzhledem k tomu, že odhady jsou založeny na výchozí roli zdroje, mohou se odhady prodeje a nákladů změnit.</span><span class="sxs-lookup"><span data-stu-id="eaceb-134">Because the estimates are based on the default role for the resource, the sales and cost estimates may change.</span></span> <span data-ttu-id="eaceb-135">Všimněte si, že v následující grafice již není zobrazena role **Vývojář**, protože tato role je nyní převzata z výchozí role rezervovatelného zdroje.</span><span class="sxs-lookup"><span data-stu-id="eaceb-135">Note that in the following graphic, you no longer see the **Developer** role as the role is now taken from the bookable resource’s default role.</span></span>

<span data-ttu-id="eaceb-136">![Odhady nákladů pro výchozí role](media/resource-assignment-cost-estimate-06.png)
![Odhad prodeje pro výchozí role](media/resource-assignment-sales-estimate-07.png)</span><span class="sxs-lookup"><span data-stu-id="eaceb-136">![Cost estimates for default roles](media/resource-assignment-cost-estimate-06.png)
![Sales estimate for default roles](media/resource-assignment-sales-estimate-07.png)</span></span>

<span data-ttu-id="eaceb-137">Po dokončení upgradu můžete upravit roli člena týmu tak, aby byla jiná než přiřazená výchozí hodnota.</span><span class="sxs-lookup"><span data-stu-id="eaceb-137">After upgrade is complete, you can edit a team member's role to be something other than the assigned default.</span></span> <span data-ttu-id="eaceb-138">Pokud však změníte roli členů týmu, bude změněna u všech jim přiřazených úkolů, protože členům týmu již není dovoleno přiřazovat více rolí ve verzi 3.</span><span class="sxs-lookup"><span data-stu-id="eaceb-138">However, if you change a team members role, it will be changed on all of their assigned tasks because team members are no longer allowed to be assigned multiple roles in version 3.</span></span>

![Aktualizace role zdroje](media/resource-role-assignment-08.png)

<span data-ttu-id="eaceb-140">To platí také pro úkoly na řádku, které byly přiřazeny pojmenovaným zdrojům v případě, že změníte organizační jednotku zdroje z výchozí na jinou organizační jednotku.</span><span class="sxs-lookup"><span data-stu-id="eaceb-140">This is also true for line tasks that were assigned to named resources when you change the resource’s organization unit from the default to another organization unit.</span></span> <span data-ttu-id="eaceb-141">Po dokončení upgradu verze 3 bude přiřazení používat výchozí organizační jednotku zdroje namísto jednotky nastavené v úkolu na řádku.</span><span class="sxs-lookup"><span data-stu-id="eaceb-141">After the version 3 upgrade is complete, the assignment will use the resource’s default organization unit instead of the one set on the line task.</span></span>

### <a name="tasks-assigned-to-generic-resources"></a><span data-ttu-id="eaceb-142">Úkoly přiřazené k obecným zdrojům</span><span class="sxs-lookup"><span data-stu-id="eaceb-142">Tasks assigned to generic resources</span></span>
<span data-ttu-id="eaceb-143">Ve verzi 2 a verzi 1 můžete nastavit roli a organizační jednotku v úkolu a potom pomocí funkce **Vygenerovat tým** vygenerovat obecné zdroje na základě atributů nastavených v úkolu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-143">In version 2 and version 1, you can set the role and org unit on a task and then use the **Generate team** feature to generate generic resources based on the attributes set on the task.</span></span> <span data-ttu-id="eaceb-144">Ve verzi 3 vytvoříte obecné členy týmu s rolí a organizační jednotkou a potom přiřadíte k úkolům členy týmu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-144">In version 3, you create the generic team members with role and org unit, and then assign the team members to tasks.</span></span>

<span data-ttu-id="eaceb-145">Ve verzích 2 a 1 mohou být projekty s obecnými zdroji ve dvou stavech nebo v jejich kombinaci na úrovni úkolu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-145">In version 2 and version 1, projects with generic resources can be in two states, or a mix of both at the task level.</span></span> <span data-ttu-id="eaceb-146">Vezměte si například následující situace:</span><span class="sxs-lookup"><span data-stu-id="eaceb-146">For example, you can have the following scenarios:</span></span>

- <span data-ttu-id="eaceb-147">Úkoly s rolemi a organizačními jednotkami jsou nastaveny, ale nebyly vygenerovány žádná přidružená přiřazení zdrojů.</span><span class="sxs-lookup"><span data-stu-id="eaceb-147">Tasks with roles and org units set, but no affiliated resource assignment has been generated.</span></span>
- <span data-ttu-id="eaceb-148">Úkoly s přiřazeními zdrojů obecných členů týmů, které byly přiřazeny vytvořením obecného zdroje pomocí funkce **Vygenerovat tým**.</span><span class="sxs-lookup"><span data-stu-id="eaceb-148">Tasks with generic team member resource assignments that were assigned by creating generic resource using the **Generate team** feature.</span></span>

<span data-ttu-id="eaceb-149">Než zahájíte upgrade, doporučujeme znovu vygenerovat tým pro každý projekt, který má úkoly přiřazené k obecným zdrojům nebo u kterého je ještě třeba spustit proces generování týmu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-149">Before you begin your upgrade, we recommend that you re-generate the team for each project that has tasks assigned to generic resources or has yet to have the generate team process run on them.</span></span>

<span data-ttu-id="eaceb-150">U úkolů, které jsou přiřazeny obecným členům týmu vygenerovaným pomocí funkce **Vygenerovat tým**, bude při upgradu tento obecný zdroj v týmu ponechán a toto přiřazení zůstane tomuto obecnému členovi týmu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-150">For tasks that are assigned to generic team members that were generated with **Generate Team**, the upgrade will leave the generic resource on the team and leave the assignment to that generic team member.</span></span> <span data-ttu-id="eaceb-151">Požadavek na zdroj pro obecného člena týmu doporučujeme vygenerovat po upgradu, ale dříve, než rezervujete nebo odešlete žádost o zdroj.</span><span class="sxs-lookup"><span data-stu-id="eaceb-151">We recommend that you generate the resource requirement for the generic team member after the upgrade but before you book or submit a resource request.</span></span> <span data-ttu-id="eaceb-152">Tím zůstanou zachována jakákoli přiřazení organizační jednotky pro obecné členy týmu, která se liší od smluvní organizační jednotky projektu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-152">This will preserve any org unit assignments on the generic team members that are different than the project’s contracting org unit.</span></span>

<span data-ttu-id="eaceb-153">Například v projektu Project Z je smluvní organizační jednotkou Contoso US.</span><span class="sxs-lookup"><span data-stu-id="eaceb-153">For example, in the Project Z project, the contracting org unit is Contoso US.</span></span> <span data-ttu-id="eaceb-154">V plánu projektu byla k testování úkolů v rámci fáze implementace přiřazena role Technický poradce a přiřazenou organizační jednotkou je Contoso India.</span><span class="sxs-lookup"><span data-stu-id="eaceb-154">In the project plan, testing tasks within the Implementation phase have been assigned the role Technical Consultant and the assigned org unit is Contoso India.</span></span>

![Přiřazení organizace v rámci fáze implementace](media/org-unit-assignment-09.png)

<span data-ttu-id="eaceb-156">Po fázi implementace bude úkol testu integrace přiřazen k roli Technický poradce, ale organizace bude nastavena na Contoso US.</span><span class="sxs-lookup"><span data-stu-id="eaceb-156">After the implementation phase, the integration test task is assigned to the role Technical consultant, but the org is set to Contoso US.</span></span>  

![Přiřazení organizace v úkolu testování integrace](media/org-unit-generate-team-10.png)

<span data-ttu-id="eaceb-158">Při generování týmu pro projekt budou z důvodu různých organizačních jednotek v úkolech vytvořeni dva obecní členové týmu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-158">When you generate a team for the project, two generic team members are created due to the different org units on the tasks.</span></span> <span data-ttu-id="eaceb-159">Technický poradce 1 bude přiřazen k úkolům Contoso India a Technický poradce 2 bude mít úkoly Contoso US.</span><span class="sxs-lookup"><span data-stu-id="eaceb-159">Technical consultant 1 will be assigned the Contoso India tasks and Technical consultant 2 will have the Contoso US tasks.</span></span>  

![Vygenerovaní obecní členové týmu](media/org-unit-assignments-multiple-resources-11.png)

> [!NOTE]
> <span data-ttu-id="eaceb-161">V aplikaci Project Service Automation verze 2 a 1 nedrží člen týmu organizační jednotku, která je spravována v úkolu na řádku.</span><span class="sxs-lookup"><span data-stu-id="eaceb-161">In Project Service Automation version 2 and version 1, the team member does not hold the organization unit, that is maintained on the line task.</span></span>

![Úkoly na řádku verze 2 a 1 v aplikaci Project Service Automation](media/line-tasks-12.png)

<span data-ttu-id="eaceb-163">Organizační jednotku můžete zobrazit v zobrazení odhadů.</span><span class="sxs-lookup"><span data-stu-id="eaceb-163">You can see the organization unit on the estimates view.</span></span> 

![Odhady organizační jednotky](media/org-unit-estimates-view-13.png)
 
<span data-ttu-id="eaceb-165">Po dokončení upgradu bude organizační jednotka v úkolu na řádku, který odpovídá obecnému členovi týmu, přidána k obecnému členovi týmu a úkol na řádku bude odebrán.</span><span class="sxs-lookup"><span data-stu-id="eaceb-165">When the upgrade is complete, the organization unit on the line task that corresponds to the generic team member is added to the generic team member and the line task is removed.</span></span> <span data-ttu-id="eaceb-166">Proto doporučujeme před upgradem vygenerovat nebo znovu vygenerovat tým pro každý projekt, který obsahuje obecné zdroje.</span><span class="sxs-lookup"><span data-stu-id="eaceb-166">Because of this, we recommend that before you upgrade, you generate or re-generate the team on each project that contains generic resources.</span></span>

<span data-ttu-id="eaceb-167">Pro úkoly, které jsou přiřazeny k roli s organizační jednotkou, která se liší od organizační jednotky smluvního projektu, a ve kterých nebyl vygenerován tým, bude při upgradu vytvořen obecný člen týmu pro roli, ale použije se smluvní jednotka projektu pro organizační jednotku člena týmu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-167">For tasks that are assigned to a role with an org unit that differs from the org unit of the contracting project, and a team has not been generated, upgrade will create a generic team member for the role, but will use the contracting unit of the project for the team member's org unit.</span></span> <span data-ttu-id="eaceb-168">S ohledem na příklad Project Z to znamená, že smluvní organizační jednotce Contoso US a úkolům testování plánu projektu v rámci fáze implementace byla přiřazena role Technický poradce s organizační jednotkou přiřazenou společnosti Contoso India.</span><span class="sxs-lookup"><span data-stu-id="eaceb-168">Referring back to the example with Project Z, this means that the contracting org unit Contoso US, and the project plan testing tasks within the Implementation phase have been assigned the role Technical Consultant with the org unit assigned to Contoso India.</span></span> <span data-ttu-id="eaceb-169">Úkol testování integrace bude dokončen poté, co bude fáze implementace přiřazena k roli Technický poradce.</span><span class="sxs-lookup"><span data-stu-id="eaceb-169">The Integration test task that is completed after the Implementation phase has been assigned to the role Technical consultant.</span></span> <span data-ttu-id="eaceb-170">Organizační jednotka je Contoso US a tým nebyl vygenerován.</span><span class="sxs-lookup"><span data-stu-id="eaceb-170">The org unit is Contoso US and a team has not been generated.</span></span> <span data-ttu-id="eaceb-171">Upgrade vytvoří jednoho obecného člena týmu, technického poradce, který má přiřazené hodiny všech tří úkolů, a organizační jednotku Contoso US, což je smluvní organizační jednotka projektu.</span><span class="sxs-lookup"><span data-stu-id="eaceb-171">Upgrade will create one generic team member, a Technical consultant that has the assigned hours of all three tasks, and an org unit of Contoso US, the project’s contracting org unit.</span></span>   
 
<span data-ttu-id="eaceb-172">Změna výchozího nastavení různých organizačních jednotek zdroje u nevygenerovaných členů týmu je důvodem, proč doporučujeme vygenerovat nebo znovu vygenerovat tým pro každý projekt, který obsahuje obecné zdroje, ještě před upgradem, aby nedošlo ke ztrátě přiřazení organizační jednotky.</span><span class="sxs-lookup"><span data-stu-id="eaceb-172">Changing the default of the different resourcing org units on un-generated team members is the reason we recommend that you generate or re-generate the team on each project that contains generic resources prior to the upgrade so that the org unit assignments are not lost.</span></span>

