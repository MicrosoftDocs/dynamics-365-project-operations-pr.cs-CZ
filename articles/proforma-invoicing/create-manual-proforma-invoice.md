---
title: Proforma faktury
description: Tento téma poskytuje informace o proforma fakturách v Project Operations.
author: rumant
manager: AnnBe
ms.date: 04/05/2021
ms.topic: article
ms.prod: ''
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: b143ba286f25ecb23fea09a85bca06543f7f55ff
ms.sourcegitcommit: ca0fc078d1a12484eca193fe051b8442c0559db8
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/07/2021
ms.locfileid: "5866853"
---
# <a name="proforma-invoices"></a><span data-ttu-id="d1176-103">Proforma faktury</span><span class="sxs-lookup"><span data-stu-id="d1176-103">Proforma invoices</span></span>

<span data-ttu-id="d1176-104">_**Platí pro:** Project Operations pro scénáře založené na zdrojích / položkách, které nejsou na skladě_</span><span class="sxs-lookup"><span data-stu-id="d1176-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="d1176-105">Proforma fakturace je užitečná, protože projektovým manažerům poskytuje druhou úroveň schválení před tím, než vytvoří faktury pro zákazníky.</span><span class="sxs-lookup"><span data-stu-id="d1176-105">Proforma invoicing gives project managers a second level of approval before they create invoices for customers.</span></span> <span data-ttu-id="d1176-106">První úroveň schválení je dokončena schválením časových, výdajových a materiálových záznamů, které odešlou členové projektového týmu.</span><span class="sxs-lookup"><span data-stu-id="d1176-106">The first level of approval is completed when time, expense, and material entries that project team members submit are approved.</span></span> <span data-ttu-id="d1176-107">Potvrzené proforma faktury jsou k dispozici v modulu Project Accounting v Project Operations.</span><span class="sxs-lookup"><span data-stu-id="d1176-107">Confirmed proforma invoices are available in the Project Accounting module of Project Operations.</span></span> <span data-ttu-id="d1176-108">Účetní projektu mohou provádět další aktualizace, jako je například DPH, účtování a rozložení faktur.</span><span class="sxs-lookup"><span data-stu-id="d1176-108">Project accountants can perform additional updates such as sales tax, accounting, and invoice layout.</span></span>


## <a name="creating-project-invoices"></a><span data-ttu-id="d1176-109">Vytvoření projektových faktur</span><span class="sxs-lookup"><span data-stu-id="d1176-109">Creating project invoices</span></span>

<span data-ttu-id="d1176-110">Projektové faktury lze vytvářet jednotlivě nebo hromadně.</span><span class="sxs-lookup"><span data-stu-id="d1176-110">Project invoices can be created one at a time or in bulk.</span></span> <span data-ttu-id="d1176-111">Můžete je vytvořit ručně nebo je lze nakonfigurovat tak, aby byly generovány v automatických spuštěních.</span><span class="sxs-lookup"><span data-stu-id="d1176-111">You can create them manually, or they can be configured so that they are generated in automated runs.</span></span>

### <a name="manually-create-project-invoices"></a><span data-ttu-id="d1176-112">Ruční vytvoření projektových faktur</span><span class="sxs-lookup"><span data-stu-id="d1176-112">Manually create project invoices</span></span> 

<span data-ttu-id="d1176-113">Ze stránky se seznamem **Projektové smlouvy** můžete vytvořit projektové faktury samostatně pro každou projektovou smlouvu nebo můžete faktury vytvořit hromadně pro více projektových smluv.</span><span class="sxs-lookup"><span data-stu-id="d1176-113">From the **Project Contracts** list page, you can create project invoices separately for each project contract, or you can create invoices in bulk for multiple project contracts.</span></span>

<span data-ttu-id="d1176-114">Chcete-li vytvořit fakturu pro konkrétní projektovou smlouvu, postupujte podle tohoto kroku.</span><span class="sxs-lookup"><span data-stu-id="d1176-114">Follow this step to create an invoice for a specific project contract.</span></span>

- <span data-ttu-id="d1176-115">Na stránce se seznamem **Projektových smluv** otevřete projektovou smlouvu a pak vyberte **Vytvořit fakturu**.</span><span class="sxs-lookup"><span data-stu-id="d1176-115">On the **Project Contracts** list page, open a project contract, and then select **Create Invoice**.</span></span>

    <span data-ttu-id="d1176-116">Je vygenerována faktura pro všechny transakce vybrané projektové smlouvy, které mají stav **Připraveno k fakturaci**.</span><span class="sxs-lookup"><span data-stu-id="d1176-116">An invoice is generated for all transactions for the selected project contract that have a status of **Ready to Invoice**.</span></span> <span data-ttu-id="d1176-117">Tyto transakce zahrnují čas, výdaje, materiály, milníky a další nevyfakturované řádky prodejního deníku.</span><span class="sxs-lookup"><span data-stu-id="d1176-117">These transactions include time, expenses, materials, milestones, and other unbilled sales journal lines.</span></span>

<span data-ttu-id="d1176-118">Chcete-li vytvořit faktury hromadně, postupujte následovně.</span><span class="sxs-lookup"><span data-stu-id="d1176-118">Follow these steps to create invoices in bulk.</span></span>

1. <span data-ttu-id="d1176-119">Na stránce se seznamem **Projektových smluv** vyberte jednu nebo více projektových smluv, pro které musíte vytvořit fakturu, a pak vyberte **Vytvořit projektové faktury**.</span><span class="sxs-lookup"><span data-stu-id="d1176-119">On the **Project Contracts** list page, select one or more project contracts that you must create an invoice for, and then select **Create Project Invoices**.</span></span>

    <span data-ttu-id="d1176-120">Zobrazí se zpráva s upozorněním, že před vytvořením faktur může dojít k prodlevě.</span><span class="sxs-lookup"><span data-stu-id="d1176-120">A warning message informs you that there might be a delay before invoices are created.</span></span> <span data-ttu-id="d1176-121">Tento proces je také zobrazen.</span><span class="sxs-lookup"><span data-stu-id="d1176-121">The process is also shown.</span></span>

2. <span data-ttu-id="d1176-122">Výběrem **OK** zavřete dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="d1176-122">Select **OK** to close the message box.</span></span>

    <span data-ttu-id="d1176-123">Je vygenerována faktura pro všechny transakce na řádku smlouvy, které mají stav **Připraveno k fakturaci**.</span><span class="sxs-lookup"><span data-stu-id="d1176-123">An invoice is generated for all transactions on a contract line that have a status of **Ready to Invoice**.</span></span> <span data-ttu-id="d1176-124">Tyto transakce zahrnují čas, výdaje, materiály, milníky a další nevyfakturované řádky prodejního deníku.</span><span class="sxs-lookup"><span data-stu-id="d1176-124">These transactions include time, expenses, materials, milestones, and other unbilled sales journal lines.</span></span>

3. <span data-ttu-id="d1176-125">Chcete-li zobrazit generované faktury, přejděte do **Prodej** \> **Fakturace** \> **Faktury**.</span><span class="sxs-lookup"><span data-stu-id="d1176-125">To view the invoices that are generated, go to **Sales** \> **Billing** \> **Invoices**.</span></span> <span data-ttu-id="d1176-126">Pro každou projektovou smlouvu se zobrazí jedna faktura.</span><span class="sxs-lookup"><span data-stu-id="d1176-126">You will see one invoice for each project contract.</span></span>

### <a name="set-up-automated-creation-of-project-invoices"></a><span data-ttu-id="d1176-127">Nastavení automatického vytváření projektových faktur</span><span class="sxs-lookup"><span data-stu-id="d1176-127">Set up automated creation of project invoices</span></span> 

<span data-ttu-id="d1176-128">Chcete-li nakonfigurovat spuštění automatické fakturace, postupujte následujícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="d1176-128">Follow these steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="d1176-129">Přejděte na **Nastavení** \> **Dávkové úlohy**.</span><span class="sxs-lookup"><span data-stu-id="d1176-129">Go to **Settings** \> **Batch jobs**.</span></span>
2. <span data-ttu-id="d1176-130">Vytvořte dávkovou úlohu a pojmenujte ji **Vytvořit faktury v Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="d1176-130">Create a batch job, and name it **Project Operations Create Invoices**.</span></span> <span data-ttu-id="d1176-131">Název dávkové úlohy musí obsahovat termín „Vytvořit faktury”.</span><span class="sxs-lookup"><span data-stu-id="d1176-131">The name of the batch job must include the term "Create Invoices."</span></span>
3. <span data-ttu-id="d1176-132">V poli **Typ úlohy** vyberte **Žádný**.</span><span class="sxs-lookup"><span data-stu-id="d1176-132">In the **Job type** field, select **None**.</span></span> <span data-ttu-id="d1176-133">Ve výchozím nastavení jsou možnosti **Frekvence denně** a **Je aktivní** nastaveny na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="d1176-133">By default, the **Frequency Daily** and **Is Active** options are set to **Yes**.</span></span>
4. <span data-ttu-id="d1176-134">Vyberte **Spustit pracovní postup**.</span><span class="sxs-lookup"><span data-stu-id="d1176-134">Select **Run Workflow**.</span></span> <span data-ttu-id="d1176-135">V dialogovém okně **Vyhledat záznam** se zobrazí tři pracovní postupy:</span><span class="sxs-lookup"><span data-stu-id="d1176-135">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

    - <span data-ttu-id="d1176-136">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="d1176-136">ProcessRunCaller</span></span>
    - <span data-ttu-id="d1176-137">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="d1176-137">ProcessRunner</span></span>
    - <span data-ttu-id="d1176-138">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="d1176-138">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="d1176-139">Vyberte **ProcessRunCaller** a potom vyberte **Přidat**.</span><span class="sxs-lookup"><span data-stu-id="d1176-139">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="d1176-140">V dalším dialogovém okně vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="d1176-140">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="d1176-141">Po pracovním postupu **Spánek** následuje pracovní postup **Zpracovat**.</span><span class="sxs-lookup"><span data-stu-id="d1176-141">A **Sleep** workflow is followed by a **Process** workflow.</span></span>

    <span data-ttu-id="d1176-142">Pracovní postup **ProcessRunner** můžete také vybrat v kroku 5.</span><span class="sxs-lookup"><span data-stu-id="d1176-142">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="d1176-143">Když potom vyberete **OK**, bude pracovní postup **Zpracovat** následován pracovním postupem **Spánek**.</span><span class="sxs-lookup"><span data-stu-id="d1176-143">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="d1176-144">Pracovní postupy **ProcessRunCaller** a **ProcessRunner** vytvářejí faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-144">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="d1176-145">**ProcessRunCaller** volá **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="d1176-145">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="d1176-146">**ProcessRunner** je pracovní postup, který skutečně vytváří faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-146">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="d1176-147">Prochází všemi řádky smluv, pro které musí být vytvořeny faktury, a vytváří faktury pro tyto řádky.</span><span class="sxs-lookup"><span data-stu-id="d1176-147">It goes through all the contract lines that invoices must be created for, and it creates invoices for those lines.</span></span> <span data-ttu-id="d1176-148">Aby určil řádky smluv, pro které musí být vytvořeny faktury, vyhledává úloha data spuštění faktury pro řádky smluv.</span><span class="sxs-lookup"><span data-stu-id="d1176-148">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="d1176-149">Jestliže řádky smluv, které patří k jedné smlouvě, mají stejné datum spuštění faktury, budou transakce sloučeny do jedné faktury, která má dva řádky faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-149">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="d1176-150">Pokud neexistují žádné transakce pro vytvoření faktur, úloha přeskočí vytvoření faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-150">If there are no transactions to create invoices for, the job skips invoice creation.</span></span>

<span data-ttu-id="d1176-151">Proces **ProcessRunner** po svém dokončení volá proces **ProcessRunCaller**, poskytne čas ukončení a je zavřen.</span><span class="sxs-lookup"><span data-stu-id="d1176-151">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="d1176-152">Proces **ProcessRunCaller** poté spustí časovač, který běží po dobu 24 hodin od zadaného času ukončení.</span><span class="sxs-lookup"><span data-stu-id="d1176-152">**ProcessRunCaller** then starts a timer that runs for 24 hours from the specified end time.</span></span> <span data-ttu-id="d1176-153">Po doběhnutí časovače je **ProcessRunCaller** uzavřen.</span><span class="sxs-lookup"><span data-stu-id="d1176-153">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="d1176-154">Úloha dávkového zpracování pro vytváření faktur je opakující se úloha.</span><span class="sxs-lookup"><span data-stu-id="d1176-154">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="d1176-155">Pokud je tento dávkový proces spuštěn vícekrát, vytvoří se více instancí této úlohy a způsobí chyby.</span><span class="sxs-lookup"><span data-stu-id="d1176-155">If this batch process is run many times, multiple instances of the job are created and cause errors.</span></span> <span data-ttu-id="d1176-156">Proto byste tento dávkový proces měli spustit pouze jednou a restartovat ho, pouze pokud přestane běžet.</span><span class="sxs-lookup"><span data-stu-id="d1176-156">Therefore, you should start the batch process only one time, and you should restart it only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="d1176-157">Dávková fakturace běží pouze pro řádky projektové smlouvy, které jsou konfigurovány podle plánů faktur.</span><span class="sxs-lookup"><span data-stu-id="d1176-157">Batch invoicing only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="d1176-158">Řáeke smlouvy s metodou fakturace s pevnou cenou musí mít nakonfigurované milníky.</span><span class="sxs-lookup"><span data-stu-id="d1176-158">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="d1176-159">Řádek smlouvy o projektu s metodou fakturace času a materiálu bude vyžadovat sestavení časového rozvrhu faktur.</span><span class="sxs-lookup"><span data-stu-id="d1176-159">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span> <span data-ttu-id="d1176-160">Totéž platí pro řádek smlouvy založené na projektu.</span><span class="sxs-lookup"><span data-stu-id="d1176-160">The same applies to a project-based contract line.</span></span>      
 
### <a name="edit-a-draft-invoice"></a><span data-ttu-id="d1176-161">Úprava konceptu faktury</span><span class="sxs-lookup"><span data-stu-id="d1176-161">Edit a draft invoice</span></span>

<span data-ttu-id="d1176-162">Když vytváříte koncept projektové faktury, jsou všechny nefakturované prodejní transakce, které byly vytvořeny při schválení záznamů času, výdajů a využití materiálu, načteny do faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-162">When you create a draft project invoice, all unbilled sales transactions that were created when the time, expense, and material usage entries were approved are pulled onto the invoice.</span></span> <span data-ttu-id="d1176-163">Dokud je faktura stále ve fázi konceptu, můžete provést následující úpravy:</span><span class="sxs-lookup"><span data-stu-id="d1176-163">You can make the following adjustments while the invoice is still in a draft stage:</span></span>

- <span data-ttu-id="d1176-164">Odstranit nebo upravit podrobnosti řádku faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-164">Delete or edit invoice line details.</span></span>
- <span data-ttu-id="d1176-165">Upravit a přizpůsobit množství a typ fakturace.</span><span class="sxs-lookup"><span data-stu-id="d1176-165">Edit and adjust the quantity and billing type.</span></span>

<span data-ttu-id="d1176-166">Chcete-li fakturu potvrdit, vyberte **Potvrdit**.</span><span class="sxs-lookup"><span data-stu-id="d1176-166">Select **Confirm** to confirm an invoice.</span></span> <span data-ttu-id="d1176-167">Akce Potvrdit představuje jednosměrnou akci.</span><span class="sxs-lookup"><span data-stu-id="d1176-167">The Confirm action is a one-way action.</span></span> <span data-ttu-id="d1176-168">Když vyberete **Potvrdit**, systém nastaví fakturu jen pro čtení a vytvoří skutečné fakturované hodnoty z každé podrobnosti řádku faktury pro každý řádek faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-168">When you select **Confirm**, the system makes the invoice read-only and creates billed sales actuals from each invoice line detail for each invoice line.</span></span> <span data-ttu-id="d1176-169">Pokud podrobnosti řádku faktury odkazují na nefakturovanou skutečnou hodnotu prodeje, tak systém také stornuje nefakturovanou skutečnou hodnotu prodeje.</span><span class="sxs-lookup"><span data-stu-id="d1176-169">If the invoice line detail references an unbilled sales actual, the system also reverses the unbilled sales actual.</span></span> <span data-ttu-id="d1176-170">(Všechny podrobnosti řádku faktury vytvořené z časových nebo výdajových záznamů budou odkazovat na nefakturovanou skutečnou hodnotu prodeje.) Systémy integrace hlavní knihy mohou toto storno použít ke zrušení probíhající práce (WIP) pro účetní účely.</span><span class="sxs-lookup"><span data-stu-id="d1176-170">(Any invoice line detail that was created from a time or expense entry will reference an unbilled sales actual.) General ledger integration systems can use this reversal to reverse project work in progress (WIP) for accounting purposes.</span></span>

### <a name="correct-a-confirmed-invoice"></a><span data-ttu-id="d1176-171">Oprava potvrzené faktury</span><span class="sxs-lookup"><span data-stu-id="d1176-171">Correct a confirmed invoice</span></span>

<span data-ttu-id="d1176-172">Potvrzené faktury lze upravovat (opravovat).</span><span class="sxs-lookup"><span data-stu-id="d1176-172">Confirmed invoices can be edited (corrected).</span></span> <span data-ttu-id="d1176-173">Když opravíte potvrzenou fakturu, vytvoří se nový koncept opravné faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-173">When you correct a confirmed invoice, a new draft corrective invoice is created.</span></span> <span data-ttu-id="d1176-174">Protože se předpokládá, že chcete zrušit všechny transakce a množství z původní faktury, obsahuje tato opravná faktura všechny transakce z původní faktury a všechna množství na ní jsou 0 (nula).</span><span class="sxs-lookup"><span data-stu-id="d1176-174">Because the assumption is that you want to reverse all the transactions and quantities from the original invoice, this corrective invoice includes all the transactions from the original invoice, and all the quantities on it are 0 (zero).</span></span>

<span data-ttu-id="d1176-175">Pokud transakce nevyžadují opravu, můžete je odebrat z konceptu opravné faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-175">If any transactions don't require correction, you can remove them from the draft corrective invoice.</span></span> <span data-ttu-id="d1176-176">Pokud chcete zrušit nebo vrátit pouze částečné množství, můžete upravit pole **Množství** v podrobnostech řádku.</span><span class="sxs-lookup"><span data-stu-id="d1176-176">If you want to reverse or return only a partial quantity, you can edit the **Quantity** field on the line detail.</span></span> <span data-ttu-id="d1176-177">Pokud otevřete podrobnosti řádku faktury, uvidíte původní množství faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-177">If you open the invoice line detail, you can see the original invoice quantity.</span></span> <span data-ttu-id="d1176-178">Potom můžete upravit aktuální množství faktury tak, aby bylo menší nebo větší než původní množství faktury.</span><span class="sxs-lookup"><span data-stu-id="d1176-178">You can then edit the current invoice quantity so that it's less than or more than the original invoice quantity.</span></span>

<span data-ttu-id="d1176-179">Po potvrzení opravné faktury se původní skutečná hodnota fakturovaného prodeje stornuje a vytvoří se nová skutečná hodnota fakturovaného prodeje.</span><span class="sxs-lookup"><span data-stu-id="d1176-179">When you confirm a corrective invoice, the original billed sales actual is reversed, and a new billed sales actual is created.</span></span> <span data-ttu-id="d1176-180">Pokud bylo množství sníženo, rozdíl způsobí, že bude vytvořena i nová skutečná hodnota nefakturovaného prodeje.</span><span class="sxs-lookup"><span data-stu-id="d1176-180">If the quantity was reduced, the difference will cause a new unbilled sales actual to be created too.</span></span> <span data-ttu-id="d1176-181">Pokud byl například původní fakturovaný prodej na 8 hodin a opravné podrobnosti řádku faktury obsahují snížené množství 6 hodin, stornují se původní vyfakturované prodejní řádky a vytvoří dvě nové skutečné hodnoty:</span><span class="sxs-lookup"><span data-stu-id="d1176-181">For example, if the original billed sale was for eight hours, and the corrective invoice line detail has a reduced quantity of six hours, the original billed sales line is reversed and two new actuals are created:</span></span>

- <span data-ttu-id="d1176-182">Fakturovaná skutečná hodnota prodeje pro 6 hodin.</span><span class="sxs-lookup"><span data-stu-id="d1176-182">A billed sales actual for six hours.</span></span>
- <span data-ttu-id="d1176-183">Skutečná hodnota nefakturovaného prodeje pro zbývající dvě hodiny.</span><span class="sxs-lookup"><span data-stu-id="d1176-183">An unbilled sales actual for the remaining two hours.</span></span> <span data-ttu-id="d1176-184">Tato transakce může být buď fakturována později, nebo označena jako neúčtovatelná, v závislosti na jednáních se zákazníkem.</span><span class="sxs-lookup"><span data-stu-id="d1176-184">This transaction can either be billed later or marked as non-chargeable, depending on the negotiations with the customer.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
