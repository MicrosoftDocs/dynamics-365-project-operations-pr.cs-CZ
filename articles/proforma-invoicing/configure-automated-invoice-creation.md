---
title: Konfigurace automatického vytváření faktur
description: Toto téma poskytuje informace o tom, jak nakonfigurovat systém pro automatické generování faktur.
author: rumant
manager: Annbe
ms.date: 10/13/2020
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 295c3b099c9670c930fb2ba2fd208be63a77217f
ms.sourcegitcommit: 4cf1dc1561b92fca4175f0b3813133c5e63ce8e6
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/28/2020
ms.locfileid: "4122425"
---
# <a name="configure-automatic-invoice-creation"></a><span data-ttu-id="49e7a-103">Konfigurace automatického vytváření faktur</span><span class="sxs-lookup"><span data-stu-id="49e7a-103">Configure automatic invoice creation</span></span>

<span data-ttu-id="49e7a-104">_**Platí pro:** Project Operations pro scénáře založené na zdrojích / položkách, které nejsou na skladě_</span><span class="sxs-lookup"><span data-stu-id="49e7a-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>


<span data-ttu-id="49e7a-105">Chcete-li nakonfigurovat automatické spuštění faktury v Dynamics 365 Project Operations, proveďte následující kroky.</span><span class="sxs-lookup"><span data-stu-id="49e7a-105">Complete the following steps to configure an automated invoice run in Dynamics 365 Project operations.</span></span>

1. <span data-ttu-id="49e7a-106">Přejděte na **Nastavení** > **Dávkové úlohy**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-106">Go to **Settings** > **Batch jobs**.</span></span>
2. <span data-ttu-id="49e7a-107">Vytvořte dávkovou úlohu a pojmenujte ji **Vytvořit faktury v Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-107">Create a batch job, and name it **Project operations create invoices**.</span></span> <span data-ttu-id="49e7a-108">Název dávkové úlohy musí obsahovat slova „Vytvořit faktury”.</span><span class="sxs-lookup"><span data-stu-id="49e7a-108">The name of the batch job must include the words "create invoices."</span></span>
3. <span data-ttu-id="49e7a-109">V poli **Typ úlohy** vyberte **Žádný**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-109">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="49e7a-110">Ve výchozím nastavení jsou možnosti **Frekvence denně** a **Je aktivní** nastaveny na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-110">By default, the **Frequency Daily** and **Is Active** options are set to **Yes**.</span></span>
4. <span data-ttu-id="49e7a-111">Vyberte **Spustit pracovní postup**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-111">Select **Run Workflow**.</span></span> <span data-ttu-id="49e7a-112">V dialogovém okně **Vyhledat záznam** se zobrazí tři pracovní postupy:</span><span class="sxs-lookup"><span data-stu-id="49e7a-112">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

    - <span data-ttu-id="49e7a-113">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="49e7a-113">ProcessRunCaller</span></span>
    - <span data-ttu-id="49e7a-114">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="49e7a-114">ProcessRunner</span></span>
    - <span data-ttu-id="49e7a-115">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="49e7a-115">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="49e7a-116">Vyberte **ProcessRunCaller** a potom vyberte **Přidat**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-116">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="49e7a-117">V dalším dialogovém okně vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-117">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="49e7a-118">Po pracovním postupu **Spánek** následuje pracovní postup **Zpracovat**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-118">A **Sleep** workflow is followed by a **Process** workflow.</span></span>

  > [!NOTE]
  > <span data-ttu-id="49e7a-119">Pracovní postup **ProcessRunner** můžete také vybrat v kroku 5.</span><span class="sxs-lookup"><span data-stu-id="49e7a-119">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="49e7a-120">Když potom vyberete **OK**, bude pracovní postup **Zpracovat** následován pracovním postupem **Spánek**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-120">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="49e7a-121">Pracovní postupy **ProcessRunCaller** a **ProcessRunner** vytvářejí faktury.</span><span class="sxs-lookup"><span data-stu-id="49e7a-121">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="49e7a-122">**ProcessRunCaller** volá **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="49e7a-122">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="49e7a-123">**ProcessRunner** je pracovní postup, který skutečně vytváří faktury.</span><span class="sxs-lookup"><span data-stu-id="49e7a-123">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="49e7a-124">Prochází všemi řádky smluv, pro které musí být vytvořeny faktury, a vytváří faktury pro tyto řádky.</span><span class="sxs-lookup"><span data-stu-id="49e7a-124">It goes through all the contract lines that invoices must be created for, and it creates invoices for those lines.</span></span> <span data-ttu-id="49e7a-125">Aby určil řádky smluv, pro které musí být vytvořeny faktury, vyhledává úloha data spuštění faktury pro řádky smluv.</span><span class="sxs-lookup"><span data-stu-id="49e7a-125">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="49e7a-126">Jestliže řádky smluv, které patří k jedné smlouvě, mají stejné datum spuštění faktury, budou transakce sloučeny do jedné faktury, která má dva řádky faktury.</span><span class="sxs-lookup"><span data-stu-id="49e7a-126">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="49e7a-127">Pokud neexistují žádné transakce pro vytvoření faktur, úloha přeskočí vytvoření faktury.</span><span class="sxs-lookup"><span data-stu-id="49e7a-127">If there are no transactions to create invoices for, the job skips invoice creation.</span></span>

<span data-ttu-id="49e7a-128">Proces **ProcessRunner** po svém dokončení volá proces **ProcessRunCaller**, poskytne čas ukončení a je zavřen.</span><span class="sxs-lookup"><span data-stu-id="49e7a-128">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="49e7a-129">Proces **ProcessRunCaller** poté spustí časovač, který běží po dobu 24 hodin od zadaného času ukončení.</span><span class="sxs-lookup"><span data-stu-id="49e7a-129">**ProcessRunCaller** then starts a timer that runs for 24 hours from the specified end time.</span></span> <span data-ttu-id="49e7a-130">Po doběhnutí časovače je **ProcessRunCaller** uzavřen.</span><span class="sxs-lookup"><span data-stu-id="49e7a-130">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="49e7a-131">Úloha dávkového zpracování pro vytváření faktur je opakující se úloha.</span><span class="sxs-lookup"><span data-stu-id="49e7a-131">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="49e7a-132">Pokud je tento dávkový proces spuštěn vícekrát, vytvoří se více instancí této úlohy a způsobí chyby.</span><span class="sxs-lookup"><span data-stu-id="49e7a-132">If this batch process is run many times, multiple instances of the job are created and cause errors.</span></span> <span data-ttu-id="49e7a-133">Proto byste tento dávkový proces měli spustit pouze jednou a restartovat ho, pouze pokud přestane běžet.</span><span class="sxs-lookup"><span data-stu-id="49e7a-133">Therefore, you should start the batch process only one time, and you should restart it only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="49e7a-134">Dávková fakturace běží pouze pro řádky projektové smlouvy, které jsou konfigurovány podle plánů faktur.</span><span class="sxs-lookup"><span data-stu-id="49e7a-134">Batch invoicing only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="49e7a-135">Řáeke smlouvy s metodou fakturace s pevnou cenou musí mít nakonfigurované milníky.</span><span class="sxs-lookup"><span data-stu-id="49e7a-135">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="49e7a-136">Řádek smlouvy o projektu s metodou fakturace času a materiálu bude vyžadovat sestavení časového rozvrhu faktur.</span><span class="sxs-lookup"><span data-stu-id="49e7a-136">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span> <span data-ttu-id="49e7a-137">Totéž platí pro řádek smlouvy založené na projektu.</span><span class="sxs-lookup"><span data-stu-id="49e7a-137">The same applies to a project-based contract line.</span></span>     
